<!DOCTYPE html>
<html>
	<head>
		<meta charset=utf-8>
		<title>Rubik's Cube</title>

	<style>
			body {
				background-color: #262626;
				margin: 0px;
				overflow: hidden;
				font-family:Monospace;
				font-size:13px;
				text-align:center;
				text-align:center;
				cursor: pointer;
			}

			a {
				color:#0078ff;
			}

			#info {
				color: #0078ff;
				position: absolute;
				top: 10px;
				width: 100%;
			}

		</style>
	</head>
	<body>
		<div id="cube" style="width: 100%; height:90vh">

		</div>
		<!--</br>
		<div class="info">
			Scramble: <a onclick="onCommand('S')" href="#">S</a>
			Fold/Unfold: <a onclick="onCommand('O')" href="#">O</a> <br/>
			Rotate Front Face: <a onclick="onCommand('F')" href="#">F</a>
			Rotate Front Face Counterclockwise: <a onclick="onCommand('F\'')" href="#">F'</a>
			Rotate Back Face: <a onclick="onCommand('B')" href="#">B</a>
			Rotate Back Face Counterlockwise: <a onclick="onCommand('B\'')" href="#">B'</a> <br/>
			Rotate Left Face: <a onclick="onCommand('L')" href="#">L</a>
			Rotate Left Face Counterclockwise: <a onclick="onCommand('L\'')" href="#">L'</a>
			Rotate Right Face: <a onclick="onCommand('R')" href="#">R</a>
			Rotate Right Face Counterclockwise: <a onclick="onCommand('R\'')" href="#">R'</a> <br/>
			Rotate Up Face: <a onclick="onCommand('U')" href="#">U</a>
			Rotate Up Face Counterclockwise: <a onclick="onCommand('U\'')" href="#">U'</a>
			Rotate Down Face: <a onclick="onCommand('D')" href="#">D</a>
			Rotate Down Face Counterclockwise: <a onclick="onCommand('D\'')" href="#">D'</a><br/>
			Singmaster cubicle notation: <label></label>UF UR UB UL DF DR DB DL FR FL BR BL UFR URB UBL ULF DRF DFL DLB DBR<br/>
			Initial singmaster position: <input type="text" name="initPosition" id="initPosition" size="67" maxlength="67"> <button type="button" onclick="setInitialPosition()"> Set</button> <label id="message" style="color:red"></label><br/>
			Beginner's method solver, layer by layer: <a onclick="onBottomUpSolver()" href="#">V</a>
		</div>
		<br/>-->
		<div style="color:#0078ff;">
			rotation commands: F, F', B, B', U, U', D, D', L, L', R, R'   scramble: S, solving: V<br/>
			<a href="mailto:ligang@dingn.com?Subject=about%20rubiks%20cube" target="_top">Comments and Questions ?</a> </div>
		<script src="lib/three.min.js"></script>
		<script src="lib/controls/OrbitControls.js"></script>
		<script src="lib/Tween.js"></script>
		<script src="src/common.js"></script>
		<script src="src/cubestate.js"></script>
		<script src="src/cubeconfig.js"></script>
		<script src="src/transformer.js"></script>
		<script src="src/rubikscube.js"></script>
		<script src="src/cubeinteractive.js"></script>
		<script src="src/cubeconsole.js"></script>
		<script src="src/bottomupsolver.js"></script>
		<script src="lib/dat.gui.min.js"></script>
		<script src="lib/stats.min.js"></script>
		<script src="lib/slice.0.1.0.min.js"></script>
		<script>
var cubeElement = document.getElementById("cube");
var cubeConsole = new CubeConsole(SINGMASTER_SOLVED_STATE, cubeElement);
cubeConsole.render();
//cubeConsole.input_char("O");
document.addEventListener( 'keypress', onDocumentKeyPress, false );
document.addEventListener( 'keydown', onDocumentKeyDown, false );
cubeConsole.renderer.domElement.addEventListener('mousedown', onMouseDown, false);
cubeConsole.renderer.domElement.addEventListener('mousemove', onMouseMove, false);
cubeConsole.renderer.domElement.addEventListener('mouseup', onMouseUp, false);
cubeConsole.renderer.domElement.addEventListener('touchstart', onTouchStart, false);
cubeConsole.renderer.domElement.addEventListener('touchmove', onTouchMove, false);
cubeConsole.renderer.domElement.addEventListener('touchend', onTouchEnd, false);


function onMouseUp(event){
	cubeConsole.interactive.onMouseUp(event);
}

function onMouseMove(event){
	cubeConsole.interactive.onMouseMove(event);
}

function onMouseDown(event){
	cubeConsole.interactive.onMouseDown(event);
}
function onTouchStart(event){
	cubeConsole.interactive.onTouchStart(event);
}

function onTouchMove(event){
	cubeConsole.interactive.onTouchMove(event);
}

function onTouchEnd(event){
	cubeConsole.interactive.onTouchEnd(event);
}

function onDocumentKeyDown( event ) {
	var keyCode = event.keyCode;
	if ( keyCode == 8 ) {
		//event.preventDefault();
		cubeConsole.deleteChar();
		//console.log("deleting");
		//return false;
	}
}

function onDocumentKeyPress ( event ) {
	var keyCode = event.which;
	if ( keyCode == 8 ) {

		//event.preventDefault();
	} else if (document.activeElement.nodeName == "BODY"){
		var ch = String.fromCharCode( keyCode );
		if(ch.toUpperCase()=="V"){
			onBottomUpSolver();
		}else
			cubeConsole.inputChar(ch);
	}
}

function onCommand(op){
	cubeConsole.cube.command(op);
}

function onChangeTransparent(value){
	var opacity = (100-value)/100;
	cubeConsole.cube.setOpacity(opacity);
}

function onBottomUpSolver(){
	cubeConsole.cube.setIsInSolverMode(true);
	var solver = new BottomupSolver(cubeConsole.cube.getState());
	solver.solve().forEach(op=>cubeConsole.cube.command(op));
}

function setInitialPosition(){
	var initState = document.getElementById("initPosition").value;
	if (!isValidCubeState(initState)){
		document.getElementById("initPosition").select();
		document.getElementById("message").innerText = "invalid state !";
		return;
	}else{
		document.getElementById("message").innerText = "";
		cubeConsole.cube.setCubeState(initState);
	}
}
		</script>


	</body>
</html>
